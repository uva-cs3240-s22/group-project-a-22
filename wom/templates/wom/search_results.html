{% extends "wom/recipes.html" %}
{% load static %}
{% block css %}
{% block extrahead %}
<script type="text/javascript" src="{% static 'wom/js/formControls.js' %}"></script>
<script>
  $(document).on('click', '#ingredient-remove', function (e) {
    e.preventDefault();
    disableField(this.value, 'filter-form')
    return false;
  })
</script>

<link rel="stylesheet" type="text/css" href="{% static 'wom/search_results.css' %}" />
{% endblock %}
{% endblock css %}
{% block title %}Recipe Title{{recipe.title}}{% endblock %}
{% block sidebar %}
<div class="col-3">
    <div class="container-fluid sidebar">
        <form method="GET" action="{% url 'wom:search' %}" id="filter-form">
            <div class="form-group">
                <script type="text/javascript">
                    $(document).ready(function() {
                        $('#sort_by').val("{{ request.GET.sort_by }}")
                        $('#meal_type').val("{{ request.GET.meal_type }}")
                        $('#course').val("{{ request.GET.course }}")
                        $('#prep_time').val("{{ request.GET.prep_time }}")
                        $('#cook_time').val("{{ request.GET.cook_time }}")
                    })

                    function clearAll() {
                        $('#sort_by').val("")
                        $('#meal_type').val("")
                        $('#course').val("")
                        $('#prep_time').val("")
                        $('#cook_time').val("")  
                    }
                </script>
                <ul>
                    <li>
                        <div class="input-group">
                        <div class="form-outline">
                            <input type="search" id="form1" name="q" value="{{ request.GET.q }}"class="form-control" placeholder="Search"/>
                          </div>
                        </div>
                    </li>
                    <li>
                        <label class="control-label" for="sort_by">Sort By:</label>
                        <select id="sort_by" name="sort_by" >
                            <option value="" selected></option> 
                            <option value="AZ">A-Z</option>
                            <option value="Recent">Recent first</option>
                            <option value="Oldest">Oldest first</option>
                            <option value="Highest">Highest Rated of All Time</option>
                            <option value="Highest_Year">Highest Rated this Year</option>
                            <option value="Highest_Month">Highest Rated this Month</option>
                            <option value="Highest_Week">Highest Rated this Week</option>
                        </select>
                    </li>
                    <li>
                        <label class="control-label" for="meal_type">Meal Type:</label>
                        <select id="meal_type" name="meal_type" >
                            <option value="" selected ></option>
                            <option value="breakfast">Breakfast</option>
                            <option value="lunch">Lunch</option>
                            <option value="dinner">Dinner</option>
                            <option value="dessert">Dessert</option>
                        </select>
                    </li>
                    <li>
                        <label class="control-label" for="course">Course:</label>
                        <select id="course" name="course">
                            <option value="" selected ></option>
                            <option value="appetizer">Appetizer</option>
                            <option value="entree">Entree</option>
                            <option value="side">Side</option>
                            <option value="snack">Snack</option>
                        </select>
                    </li>
                    <li>
                        <label class="control-label" for="prep_time">Preparation Time:</label>
                        <select id="prep_time" name="prep_time">
                            <option value="" selected></option>
                            <option value="00:10:00"> &lt; 10 minutes</option>
                            <option value="00:20:00"> &lt; 20 minutes</option>
                            <option value="00:30:00"> &lt; 30 minutes</option>
                            <option value="00:45:00"> &lt; 45 minutes</option>
                            <option value="1:00:00"> &lt; 1 hour</option>
                            <option value="1:00:01"> &gt; 1 hour </option>
                        </select>
                    </li>
                    <li>
                        <label class="control-label" for="cook_time">Cooking Time:</label>
                        <select id="cook_time" name="cook_time">
                            <option value="" selected></option>
                            <option value="00:10:00"> &lt; 10 minutes</option>
                            <option value="00:20:00"> &lt; 20 minutes</option>
                            <option value="00:30:00"> &lt; 30 minutes</option>
                            <option value="00:45:00"> &lt; 45 minutes</option>
                            <option value="1:00:00"> &lt; 1 hour</option>
                            <option value="1:00:01"> &gt; 1 hour</option>
                        </select>
                    </li>

                </ul>

                <div class="row">
                  {% for ingredient in ingredients_search %}
                    <button type="button" id="ingredient-remove" value="ingredient-{{ ingredient }}" class="ingredient-search-item col">
                      {{ ingredient }}
                    </button>
                    <input type="hidden" id="ingredient-{{ ingredient }}" name="ingredients" value="{{ ingredient }}" />
                  {% endfor %}
                </div>

                <input type='text' id='ingredient-add' name='ingredients'></input>


                <br/><br/>
                <button type="submit" class="btn btn-primary">Update Results</button>
                <button class="btn btn-primary" onclick="clearAll()">Clear all</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}